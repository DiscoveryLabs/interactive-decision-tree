<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1-0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Interactive Decision Tree</title>
<link href="css/decisionTree.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery.min.js"></script>
<!-- <script type="text/javascript" src="js/decisionTree.js"></script>
 --></head>

<body>
<div id="debug"></div>
<ul class="tree">
  <li id="branch-1">
    <p>Thing #1</p>
    <ul>
        <li><a href="#branch-1-1">One</a></li>
        <li><a href="#branch-1-2">Two</a></li>
    </ul>
  </li>
  <li id="branch-1-1">
    <p>Thing #1-1</p>
    <ul>
        <li><a href="#branch-1-1-1">One</a></li>
        <li><a href="#branch-1-1-2">Two</a></li>
    </ul>
  </li>
  <li id="branch-1-2">
    <p>Thing #1-2</p>
    <ul>
        <li><a href="#branch-1-2-1">One</a></li>
        <li><a href="#branch-1-2-2">Two</a></li>
    </ul>
  </li>
  <li id="branch-1-1-1">
    <p>Thing #1-1-1</p>
  </li>
  <li id="branch-1-1-2">
    <p>Thing #1-1-2</p>
  </li>
  <li id="branch-1-2-1">
    <p>Thing #1-2-1</p>
  </li>
  <li id="branch-1-2-2">
    <p>Thing #1-2-2</p>
  </li>
</ul>
<a id="tree-reset"></a>

<script>
  var branchHistory = []; // for storing history

  // gather querystring params
  var params = document.location.search.substr(1).split('&');
  if(params.length > 1){
    $('#'+params[1]).addClass('active');
  }else{
    $('.tree>li:first-child').addClass('active');
  }

  // handle branch link clicks
  $('.tree li li a').on('click', function(e){
    e.preventDefault();
    targetBranch = $(e.target).attr('href');
    branchHistory.push('#'+$('.tree li.active').attr('id'));
    $('.tree li.active').removeClass('active').addClass('previous');
    $(targetBranch).addClass('active');
    addBackTo(targetBranch);
  });

  // handle back link clicks
  $('.tree').on('click', 'a.back-branch', function(e){
    e.preventDefault();
    $('.tree li.active').removeClass('active')
    targetBranch = branchHistory.pop();
    $(targetBranch).removeClass('previous').addClass('active');
    addBackTo(targetBranch);
  });

  function addBackTo(targetBranch){
    $('a.back-branch').remove();
    if(branchHistory.length > 0){
      $(targetBranch).append(
        '<a href="#" class="back-branch">&laquo; back</a>'
      );
    }
  }
</script>
</body>
</html>
